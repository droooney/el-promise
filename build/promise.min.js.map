{"version":3,"file":"promise.min.js","sources":["../lib/global.js","../lib/isFunction.js","../lib/Promise.js","../browser.js"],"sourcesContent":["/* eslint no-nested-ternary: 0 */\n/* eslint no-negated-condition: 0 */\nexport default typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n","export default (value) => (\n  typeof value === 'function'\n);\n","import isFunction from './isFunction';\n\n/**\n * @callback onFulfilledOrRejected\n * @public\n */\n\n/**\n * @callback onRejected\n * @public\n * @param {Error|*} err - Promise error.\n */\n\n/**\n * @callback onFulfilled\n * @public\n * @param {*} value - Promise value.\n */\n\nconst secret = {};\nconst iterator = global.Symbol\n  ? global.Symbol.iterator\n  : Math.random().toString(36);\nconst { toString } = {};\n\n/**\n * @class Promise\n * @public\n * @param {Function} executor - Function that takes two arguments: resolve and reject functions.\n * Call the resolve function when you need to fulfill the promise and call the reject one\n * when you need to reject it.\n * @returns {Promise} Instance of Promise.\n * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise\n * @description Class with almost identical API to\n * [ES6 Promise]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise}.\n * There is a couple differences: set Promise.onError to a function with which you want to\n * subscribe to a promise error and set Promise.onUnhandledRejection to a function with which\n * you want to subscribe to an unhandled error\n * (defaults to console.error.bind(console, '%s %o', 'Uncaught (in promise)')).\n */\nclass Promise {\n  constructor(executor) {\n    if (!isFunction(executor)) {\n      throw new TypeError(`Promise resolver ${ toString.call(executor) } is not a function`);\n    }\n\n    let hiddenStatus;\n    let hiddenValue;\n\n    const\tonFulfill = [];\n    const onReject = [];\n    const realPromise = this;\n    const hiddenPromise = {\n      handled: false,\n      get status() {\n        return hiddenStatus;\n      },\n      set status(value) {\n        hiddenStatus = value;\n        realPromise.status = value;\n      },\n      get value() {\n        return hiddenValue;\n      },\n      set value(val) {\n        hiddenValue = val;\n        realPromise.value = val;\n      }\n    };\n\n    hiddenPromise.status = 'pending';\n    hiddenPromise.value = undefined;\n\n    Object.defineProperties(this.$$ = {}, {\n      handled: {\n        get() {\n          return hiddenPromise.handled;\n        },\n        set(key) {\n          if (key === secret) {\n            hiddenPromise.handled = true;\n          }\n        }\n      },\n      handle: {\n        value(status, f, resolve, reject, key) {\n          if (key === secret) {\n            let proxy = null;\n\n            if (isFunction(f)) {\n              proxy = (value) => {\n                try {\n                  resolve(f(value));\n                } catch (err) {\n                  reject(err);\n                }\n              };\n            }\n\n            if (status === 'resolve') {\n              onFulfill.push(proxy || ((value) => resolve(value)));\n            } else if (status === 'reject') {\n              onReject.push(proxy || ((err) => reject(err)));\n            }\n          }\n        }\n      },\n      status: {\n        get() {\n          return hiddenPromise.status;\n        }\n      },\n      value: {\n        get() {\n          return hiddenPromise.value;\n        }\n      }\n    });\n\n    try {\n      executor(resolve, reject);\n    } catch (err) {\n      reject(err);\n    }\n\n    function reject(err) {\n      if (hiddenPromise.status === 'pending') {\n        hiddenPromise.status = 'rejected';\n        hiddenPromise.value = err;\n\n        for (let i = 0, length = onReject.length; i < length; i++) {\n          hiddenPromise.handled = true;\n\n          onReject[i](err);\n        }\n\n        const {\n          onUnhandledRejection,\n          onError\n        } = Promise;\n\n        if (isFunction(onError)) {\n          onError(err);\n        }\n\n        setTimeout(() => {\n          if (!hiddenPromise.handled && isFunction(onUnhandledRejection)) {\n            onUnhandledRejection(err);\n          }\n        }, 1);\n      }\n    }\n\n    function resolve(value) {\n      if (hiddenPromise.status === 'pending') {\n        if (value && isFunction(value.then)) {\n          return value.then((value) => {\n            resolve(value);\n          }, (err) => {\n            reject(err);\n          });\n        }\n\n        hiddenPromise.status = 'fulfilled';\n        hiddenPromise.value = value;\n\n        for (let i = 0, length = onFulfill.length; i < length; i++) {\n          hiddenPromise.handled = true;\n\n          onFulfill[i](value);\n        }\n      }\n    }\n  }\n\n  /**\n   * @method Promise.all\n   * @param {(Array|Iterable).<Promise|*>} iterable - Iterable object (like array) of promises\n   * or any values.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all\n   */\n  static all(iterable) {\n    const array = [];\n\n    let toResolve = 0;\n\n    if (iterable[iterator]) {\n      iterable = iterable[iterator]();\n\n      return new Promise((resolve, reject) => {\n        let next;\n        let i = 0;\n\n        while (!(next = iterable.next()).done) {\n          const promise = Promise.resolve(next.value);\n\n          toResolve++;\n\n          ((i) => {\n            promise.then((value) => {\n              toResolve--;\n              array[i] = value;\n\n              setTimeout(() => {\n                if (next.done && !toResolve) {\n                  resolve(array);\n                }\n              }, 1);\n            }, reject);\n          })(i++);\n        }\n\n        if (!i) {\n          return Promise.resolve([]);\n        }\n      });\n    }\n\n    const length = iterable.length;\n\n    if (!length) {\n      return Promise.resolve([]);\n    }\n\n    toResolve = length;\n\n    return new Promise((resolve, reject) => {\n      for (let i = 0; i < length; i++) {\n        const promise = Promise.resolve(iterable[i]);\n\n        promise.then((value) => {\n          toResolve--;\n          array[i] = value;\n\n          if (!toResolve) {\n            resolve(array);\n          }\n        }, reject);\n      }\n    });\n  }\n\n  /**\n   * @method Promise.race\n   * @param {(Array|Iterable).<Promise|*>} iterable - Iterable object (like array) of promises\n   * or any values.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/race\n   */\n  static race(iterable) {\n    if (iterable[iterator]) {\n      iterable = iterable[iterator]();\n\n      return new Promise((resolve, reject) => {\n        let next;\n\n        while (!(next = iterable.next()).done) {\n          next.value.then(resolve, reject);\n        }\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      for (let i = 0, length = iterable.length; i < length; i++) {\n        iterable[i].then(resolve, reject);\n      }\n    });\n  }\n\n  /**\n   * @method Promise.reject\n   * @param {*} [value] - Value to reject.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/reject\n   */\n  static reject(value) {\n    return new Promise((resolve, reject) => {\n      reject(value);\n    });\n  }\n\n  /**\n   * @method Promise.resolve\n   * @param {Promise|Thenable|*} [value] - Promise, thenable or any value to resolve.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/resolve\n   */\n  static resolve(value) {\n    if (value && isFunction(value.then)) {\n      return value;\n    }\n\n    return new Promise((resolve) => {\n      resolve(value);\n    });\n  }\n\n  abort() {}\n\n  /**\n   * @method Promise#catch\n   * @param {onRejected} onRejected - onRejected callback.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch\n   */\n  catch(onRejected) {\n    return this.then(null, onRejected);\n  }\n\n  /**\n   * @method Promise#finally\n   * @public\n   * @param {onFulfilledOrRejected} onFulfilledOrRejected - onFulfilledOrRejected callback.\n   * @returns {Promise}\n   * @description Method for catching both fulfilled and rejected promises.\n   *\n   * @example\n   * spinner.show();\n   * fetchData()\n   *   .then((data) => {\n   *     // do something with data\n   *   })\n   *   .catch((err) => {\n   *     // handle error somehow\n   *   })\n   *   .finally(() => {\n   *     spinner.hide();\n   *   });\n   */\n  finally(onFulfilledOrRejected) {\n    const isFunc = isFunction(onFulfilledOrRejected);\n\n    return this.then((value) => (\n      Promise\n        .resolve(\n          isFunc\n            ? onFulfilledOrRejected()\n            : 0\n        )\n        .then(() => value)\n    ), (err) => (\n      Promise\n        .resolve(\n          isFunc\n            ? onFulfilledOrRejected()\n            : 0\n        )\n        .then(() => Promise.reject(err))\n    ));\n  }\n\n  /**\n   * @method Promise#then\n   * @param {onFulfilled} [onFulfilled] - onFulfilled callback.\n   * @param {onRejected} [onRejected] - onRejected callback.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then\n   */\n  then(onFulfilled, onRejected) {\n    const promise = this.$$;\n\n    if (promise.status === 'pending') {\n      return new Promise((resolve, reject) => {\n        promise.handle('reject', onRejected, resolve, reject, secret);\n        promise.handle('resolve', onFulfilled, resolve, reject, secret);\n      });\n    }\n\n    promise.handled = secret;\n\n    const { value } = promise;\n\n    let method;\n    let handler;\n\n    if (promise.status === 'fulfilled') {\n      method = 'resolve';\n      handler = onFulfilled;\n    } else {\n      method = 'reject';\n      handler = onRejected;\n    }\n\n    if (!isFunction(handler)) {\n      return Promise[method](value);\n    }\n\n    try {\n      return Promise.resolve(handler(value));\n    } catch (err) {\n      return Promise.reject(err);\n    }\n  }\n}\n\nPromise.onError = null;\nPromise.onUnhandledRejection = console.error.bind(console, '%s %o', 'Uncaught (in promise)');\n\nexport default Promise;\n","import Promise from './lib/Promise';\n\nwindow.Promise = Promise;\n"],"names":["window","global","self","value","secret","iterator","Symbol","Math","random","toString","Promise","executor","reject","err","hiddenPromise","status","i","length","onReject","handled","onUnhandledRejection","onError","isFunction","resolve","then","onFulfill","TypeError","call","hiddenStatus","hiddenValue","realPromise","this","val","undefined","defineProperties","$$","key","f","proxy","push","onRejected","onFulfilledOrRejected","isFunc","onFulfilled","promise","handle","method","handler","iterable","array","toResolve","next","done","console","error","bind"],"mappings":"wBAEA,OAAiC,mBAAXA,QAAyBA,OAA2B,mBAAXC,QAAyBA,OAAyB,mBAATC,MAAuBA,mBCF/GC,SACG,kBAAVA,wVCkBHC,KACAC,EAAWJ,EAAOK,OACpBL,EAAOK,OAAOD,SACdE,KAAKC,SAASC,SAAS,SACnBA,IAAAA,SAiBFC,wBACQC,WAoFDC,GAAOC,GACe,YAAzBC,EAAcC,sBACFA,OAAS,aACTZ,MAAQU,MAEjB,GAAIG,GAAI,EAAGC,EAASC,EAASD,OAAQD,EAAIC,EAAQD,MACtCG,SAAU,IAEfH,GAAGH,MAIZO,GAEEV,EAFFU,qBACAC,EACEX,EADFW,OAGEC,GAAWD,MACLR,cAGC,YACJC,EAAcK,SAAWG,EAAWF,MAClBP,IAEtB,cAIEU,GAAQpB,MACc,YAAzBW,EAAcC,OAAsB,IAClCZ,GAASmB,EAAWnB,EAAMqB,YACrBrB,GAAMqB,KAAK,SAACrB,KACTA,IACP,SAACU,KACKA,OAIGE,OAAS,cACTZ,MAAQA,MAEjB,GAAIa,GAAI,EAAGC,EAASQ,EAAUR,OAAQD,EAAIC,EAAQD,MACvCG,SAAU,IAEdH,GAAGb,kBA/HdmB,EAAWX,QACR,IAAIe,+BAA+BjB,EAASkB,KAAKhB,4BAGrDiB,UACAC,SAEEJ,KACAP,KACAY,EAAcC,KACdjB,YACK,KACLC,gBACKa,OAELb,QAAOZ,KACMA,IACHY,OAASZ,MAEnBA,eACK0B,OAEL1B,OAAM6B,KACMA,IACF7B,MAAQ6B,MAIVjB,OAAS,YACTZ,MAAQ8B,cAEfC,iBAAiBH,KAAKI,qCAGhBrB,GAAcK,sBAEnBiB,GACEA,IAAQhC,MACIe,SAAU,4BAKtBJ,EAAQsB,EAAGd,EAASX,EAAQwB,MAC5BA,IAAQhC,EAAQ,IACdkC,GAAQ,IAERhB,GAAWe,OACL,SAAClC,SAEGkC,EAAElC,IACV,MAAOU,KACAA,MAKE,YAAXE,IACQwB,KAAKD,GAAU,SAACnC,SAAUoB,GAAQpB,KACxB,WAAXY,KACAwB,KAAKD,GAAU,SAACzB,SAAQD,GAAOC,qCAOrCC,GAAcC,qCAKdD,GAAcX,gBAMhBoB,EAASX,GAClB,MAAOC,KACAA,6EAwLL2B,SACGT,MAAKP,KAAK,KAAMgB,mCAuBjBC,MACAC,GAASpB,EAAWmB,SAEnBV,MAAKP,KAAK,SAACrB,SAChBO,GACGa,QACCmB,EACID,IACA,GAELjB,KAAK,iBAAMrB,MACb,SAACU,SACFH,GACGa,QACCmB,EACID,IACA,GAELjB,KAAK,iBAAMd,GAAQE,OAAOC,oCAW5B8B,EAAaH,MACVI,GAAUb,KAAKI,MAEE,YAAnBS,EAAQ7B,aACH,IAAIL,GAAQ,SAACa,EAASX,KACnBiC,OAAO,SAAUL,EAAYjB,EAASX,EAAQR,KAC9CyC,OAAO,UAAWF,EAAapB,EAASX,EAAQR,OAIpDe,QAAUf,KAEVD,GAAUyC,EAAVzC,MAEJ2C,SACAC,YAEmB,cAAnBH,EAAQ7B,UACD,YACC4B,MAED,WACCH,IAGPlB,EAAWyB,SACPrC,GAAQoC,GAAQ3C,aAIhBO,GAAQa,QAAQwB,EAAQ5C,IAC/B,MAAOU,SACAH,GAAQE,OAAOC,kCAjNfmC,MACHC,MAEFC,EAAY,KAEZF,EAAS3C,YACA2C,EAAS3C,KAEb,GAAIK,GAAQ,SAACa,EAASX,UACvBuC,UACAnC,EAAI,kBAGA4B,GAAUlC,EAAQa,QAAQ4B,EAAKhD,oBAInCa,KACQQ,KAAK,SAACrB,SAENa,GAAKb,aAEA,WACLgD,EAAKC,OAASF,KACRD,IAET,IACFrC,IACFI,QAhBImC,EAAOH,EAASG,QAAQC,cAmB5BpC,QACIN,GAAQa,iBAKfN,GAAS+B,EAAS/B,aAEnBA,MAIOA,EAEL,GAAIP,GAAQ,SAACa,EAASX,OACtB,eAAII,MACD4B,GAAUlC,EAAQa,QAAQyB,EAAShC,MAEjCQ,KAAK,SAACrB,SAENa,GAAKb,EAEN+C,KACKD,IAETrC,IAVII,EAAI,EAAGA,EAAIC,EAAQD,MAAnBA,MANFN,EAAQa,yCA4BPyB,SACNA,GAAS3C,MACA2C,EAAS3C,KAEb,GAAIK,GAAQ,SAACa,EAASX,UACvBuC,YAEKA,EAAOH,EAASG,QAAQC,QAC1BjD,MAAMqB,KAAKD,EAASX,MAKxB,GAAIF,GAAQ,SAACa,EAASX,OACtB,GAAII,GAAI,EAAGC,EAAS+B,EAAS/B,OAAQD,EAAIC,EAAQD,MAC3CA,GAAGQ,KAAKD,EAASX,oCAWlBT,SACL,IAAIO,GAAQ,SAACa,EAASX,KACpBT,qCAUIA,SACTA,IAASmB,EAAWnB,EAAMqB,MACrBrB,EAGF,GAAIO,GAAQ,SAACa,KACVpB,aAsGdO,GAAQW,QAAU,KAClBX,EAAQU,qBAAuBiC,QAAQC,MAAMC,KAAKF,QAAS,QAAS,yBC3YpErD,OAAOU,QAAUA","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvbWlzZS5qcyIsInNvdXJjZXMiOlsiLi4vbGliL2dsb2JhbC5qcyIsIi4uL2xpYi9pc0Z1bmN0aW9uLmpzIiwiLi4vbGliL1Byb21pc2UuanMiLCIuLi9icm93c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludCBuby1uZXN0ZWQtdGVybmFyeTogMCAqL1xuLyogZXNsaW50IG5vLW5lZ2F0ZWQtY29uZGl0aW9uOiAwICovXG5leHBvcnQgZGVmYXVsdCB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuIiwiZXhwb3J0IGRlZmF1bHQgKHZhbHVlKSA9PiAoXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJ1xuKTtcbiIsImltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4vaXNGdW5jdGlvbic7XG5cbi8qKlxuICogQGNhbGxiYWNrIG9uRnVsZmlsbGVkT3JSZWplY3RlZFxuICogQHB1YmxpY1xuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIG9uUmVqZWN0ZWRcbiAqIEBwdWJsaWNcbiAqIEBwYXJhbSB7RXJyb3J8Kn0gZXJyIC0gUHJvbWlzZSBlcnJvci5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBvbkZ1bGZpbGxlZFxuICogQHB1YmxpY1xuICogQHBhcmFtIHsqfSB2YWx1ZSAtIFByb21pc2UgdmFsdWUuXG4gKi9cblxuY29uc3Qgc2VjcmV0ID0ge307XG5jb25zdCBpdGVyYXRvciA9IGdsb2JhbC5TeW1ib2xcbiAgPyBnbG9iYWwuU3ltYm9sLml0ZXJhdG9yXG4gIDogTWF0aC5yYW5kb20oKS50b1N0cmluZygzNik7XG5jb25zdCB7IHRvU3RyaW5nIH0gPSB7fTtcblxuLyoqXG4gKiBAY2xhc3MgUHJvbWlzZVxuICogQHB1YmxpY1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZXhlY3V0b3IgLSBGdW5jdGlvbiB0aGF0IHRha2VzIHR3byBhcmd1bWVudHM6IHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuXG4gKiBDYWxsIHRoZSByZXNvbHZlIGZ1bmN0aW9uIHdoZW4geW91IG5lZWQgdG8gZnVsZmlsbCB0aGUgcHJvbWlzZSBhbmQgY2FsbCB0aGUgcmVqZWN0IG9uZVxuICogd2hlbiB5b3UgbmVlZCB0byByZWplY3QgaXQuXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gSW5zdGFuY2Ugb2YgUHJvbWlzZS5cbiAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUHJvbWlzZVxuICogQGRlc2NyaXB0aW9uIENsYXNzIHdpdGggYWxtb3N0IGlkZW50aWNhbCBBUEkgdG9cbiAqIFtFUzYgUHJvbWlzZV17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUHJvbWlzZX0uXG4gKiBUaGVyZSBpcyBhIGNvdXBsZSBkaWZmZXJlbmNlczogc2V0IFByb21pc2Uub25FcnJvciB0byBhIGZ1bmN0aW9uIHdpdGggd2hpY2ggeW91IHdhbnQgdG9cbiAqIHN1YnNjcmliZSB0byBhIHByb21pc2UgZXJyb3IgYW5kIHNldCBQcm9taXNlLm9uVW5oYW5kbGVkUmVqZWN0aW9uIHRvIGEgZnVuY3Rpb24gd2l0aCB3aGljaFxuICogeW91IHdhbnQgdG8gc3Vic2NyaWJlIHRvIGFuIHVuaGFuZGxlZCBlcnJvclxuICogKGRlZmF1bHRzIHRvIGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlLCAnJXMgJW8nLCAnVW5jYXVnaHQgKGluIHByb21pc2UpJykpLlxuICovXG5jbGFzcyBQcm9taXNlIHtcbiAgY29uc3RydWN0b3IoZXhlY3V0b3IpIHtcbiAgICBpZiAoIWlzRnVuY3Rpb24oZXhlY3V0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBQcm9taXNlIHJlc29sdmVyICR7IHRvU3RyaW5nLmNhbGwoZXhlY3V0b3IpIH0gaXMgbm90IGEgZnVuY3Rpb25gKTtcbiAgICB9XG5cbiAgICBsZXQgaGlkZGVuU3RhdHVzO1xuICAgIGxldCBoaWRkZW5WYWx1ZTtcblxuICAgIGNvbnN0XHRvbkZ1bGZpbGwgPSBbXTtcbiAgICBjb25zdCBvblJlamVjdCA9IFtdO1xuICAgIGNvbnN0IHJlYWxQcm9taXNlID0gdGhpcztcbiAgICBjb25zdCBoaWRkZW5Qcm9taXNlID0ge1xuICAgICAgaGFuZGxlZDogZmFsc2UsXG4gICAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gaGlkZGVuU3RhdHVzO1xuICAgICAgfSxcbiAgICAgIHNldCBzdGF0dXModmFsdWUpIHtcbiAgICAgICAgaGlkZGVuU3RhdHVzID0gdmFsdWU7XG4gICAgICAgIHJlYWxQcm9taXNlLnN0YXR1cyA9IHZhbHVlO1xuICAgICAgfSxcbiAgICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIGhpZGRlblZhbHVlO1xuICAgICAgfSxcbiAgICAgIHNldCB2YWx1ZSh2YWwpIHtcbiAgICAgICAgaGlkZGVuVmFsdWUgPSB2YWw7XG4gICAgICAgIHJlYWxQcm9taXNlLnZhbHVlID0gdmFsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBoaWRkZW5Qcm9taXNlLnN0YXR1cyA9ICdwZW5kaW5nJztcbiAgICBoaWRkZW5Qcm9taXNlLnZhbHVlID0gdW5kZWZpbmVkO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcy4kJCA9IHt9LCB7XG4gICAgICBoYW5kbGVkOiB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gaGlkZGVuUHJvbWlzZS5oYW5kbGVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQoa2V5KSB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gc2VjcmV0KSB7XG4gICAgICAgICAgICBoaWRkZW5Qcm9taXNlLmhhbmRsZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGhhbmRsZToge1xuICAgICAgICB2YWx1ZShzdGF0dXMsIGYsIHJlc29sdmUsIHJlamVjdCwga2V5KSB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gc2VjcmV0KSB7XG4gICAgICAgICAgICBsZXQgcHJveHkgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihmKSkge1xuICAgICAgICAgICAgICBwcm94eSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGYodmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ3Jlc29sdmUnKSB7XG4gICAgICAgICAgICAgIG9uRnVsZmlsbC5wdXNoKHByb3h5IHx8ICgodmFsdWUpID0+IHJlc29sdmUodmFsdWUpKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ3JlamVjdCcpIHtcbiAgICAgICAgICAgICAgb25SZWplY3QucHVzaChwcm94eSB8fCAoKGVycikgPT4gcmVqZWN0KGVycikpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzdGF0dXM6IHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgIHJldHVybiBoaWRkZW5Qcm9taXNlLnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZhbHVlOiB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gaGlkZGVuUHJvbWlzZS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIGV4ZWN1dG9yKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZWplY3QoZXJyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWplY3QoZXJyKSB7XG4gICAgICBpZiAoaGlkZGVuUHJvbWlzZS5zdGF0dXMgPT09ICdwZW5kaW5nJykge1xuICAgICAgICBoaWRkZW5Qcm9taXNlLnN0YXR1cyA9ICdyZWplY3RlZCc7XG4gICAgICAgIGhpZGRlblByb21pc2UudmFsdWUgPSBlcnI7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IG9uUmVqZWN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaGlkZGVuUHJvbWlzZS5oYW5kbGVkID0gdHJ1ZTtcblxuICAgICAgICAgIG9uUmVqZWN0W2ldKGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgb25VbmhhbmRsZWRSZWplY3Rpb24sXG4gICAgICAgICAgb25FcnJvclxuICAgICAgICB9ID0gUHJvbWlzZTtcblxuICAgICAgICBpZiAoaXNGdW5jdGlvbihvbkVycm9yKSkge1xuICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmICghaGlkZGVuUHJvbWlzZS5oYW5kbGVkICYmIGlzRnVuY3Rpb24ob25VbmhhbmRsZWRSZWplY3Rpb24pKSB7XG4gICAgICAgICAgICBvblVuaGFuZGxlZFJlamVjdGlvbihlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZSh2YWx1ZSkge1xuICAgICAgaWYgKGhpZGRlblByb21pc2Uuc3RhdHVzID09PSAncGVuZGluZycpIHtcbiAgICAgICAgaWYgKHZhbHVlICYmIGlzRnVuY3Rpb24odmFsdWUudGhlbikpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaGlkZGVuUHJvbWlzZS5zdGF0dXMgPSAnZnVsZmlsbGVkJztcbiAgICAgICAgaGlkZGVuUHJvbWlzZS52YWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBvbkZ1bGZpbGwubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBoaWRkZW5Qcm9taXNlLmhhbmRsZWQgPSB0cnVlO1xuXG4gICAgICAgICAgb25GdWxmaWxsW2ldKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIFByb21pc2UuYWxsXG4gICAqIEBwYXJhbSB7KEFycmF5fEl0ZXJhYmxlKS48UHJvbWlzZXwqPn0gaXRlcmFibGUgLSBJdGVyYWJsZSBvYmplY3QgKGxpa2UgYXJyYXkpIG9mIHByb21pc2VzXG4gICAqIG9yIGFueSB2YWx1ZXMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBOZXcgaW5zdGFuY2Ugb2YgUHJvbWlzZS5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9Qcm9taXNlL2FsbFxuICAgKi9cbiAgc3RhdGljIGFsbChpdGVyYWJsZSkge1xuICAgIGNvbnN0IGFycmF5ID0gW107XG5cbiAgICBsZXQgdG9SZXNvbHZlID0gMDtcblxuICAgIGlmIChpdGVyYWJsZVtpdGVyYXRvcl0pIHtcbiAgICAgIGl0ZXJhYmxlID0gaXRlcmFibGVbaXRlcmF0b3JdKCk7XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCBuZXh0O1xuICAgICAgICBsZXQgaSA9IDA7XG5cbiAgICAgICAgd2hpbGUgKCEobmV4dCA9IGl0ZXJhYmxlLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUobmV4dC52YWx1ZSk7XG5cbiAgICAgICAgICB0b1Jlc29sdmUrKztcblxuICAgICAgICAgICgoaSkgPT4ge1xuICAgICAgICAgICAgcHJvbWlzZS50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICB0b1Jlc29sdmUtLTtcbiAgICAgICAgICAgICAgYXJyYXlbaV0gPSB2YWx1ZTtcblxuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobmV4dC5kb25lICYmICF0b1Jlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYXJyYXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgIH0pKGkrKyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWkpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgbGVuZ3RoID0gaXRlcmFibGUubGVuZ3RoO1xuXG4gICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICAgIH1cblxuICAgIHRvUmVzb2x2ZSA9IGxlbmd0aDtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoaXRlcmFibGVbaV0pO1xuXG4gICAgICAgIHByb21pc2UudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgICB0b1Jlc29sdmUtLTtcbiAgICAgICAgICBhcnJheVtpXSA9IHZhbHVlO1xuXG4gICAgICAgICAgaWYgKCF0b1Jlc29sdmUpIHtcbiAgICAgICAgICAgIHJlc29sdmUoYXJyYXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIFByb21pc2UucmFjZVxuICAgKiBAcGFyYW0geyhBcnJheXxJdGVyYWJsZSkuPFByb21pc2V8Kj59IGl0ZXJhYmxlIC0gSXRlcmFibGUgb2JqZWN0IChsaWtlIGFycmF5KSBvZiBwcm9taXNlc1xuICAgKiBvciBhbnkgdmFsdWVzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gTmV3IGluc3RhbmNlIG9mIFByb21pc2UuXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUHJvbWlzZS9yYWNlXG4gICAqL1xuICBzdGF0aWMgcmFjZShpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZVtpdGVyYXRvcl0pIHtcbiAgICAgIGl0ZXJhYmxlID0gaXRlcmFibGVbaXRlcmF0b3JdKCk7XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCBuZXh0O1xuXG4gICAgICAgIHdoaWxlICghKG5leHQgPSBpdGVyYWJsZS5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBpdGVyYWJsZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYWJsZVtpXS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBQcm9taXNlLnJlamVjdFxuICAgKiBAcGFyYW0geyp9IFt2YWx1ZV0gLSBWYWx1ZSB0byByZWplY3QuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBOZXcgaW5zdGFuY2Ugb2YgUHJvbWlzZS5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9Qcm9taXNlL3JlamVjdFxuICAgKi9cbiAgc3RhdGljIHJlamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZWplY3QodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgUHJvbWlzZS5yZXNvbHZlXG4gICAqIEBwYXJhbSB7UHJvbWlzZXxUaGVuYWJsZXwqfSBbdmFsdWVdIC0gUHJvbWlzZSwgdGhlbmFibGUgb3IgYW55IHZhbHVlIHRvIHJlc29sdmUuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBOZXcgaW5zdGFuY2Ugb2YgUHJvbWlzZS5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9Qcm9taXNlL3Jlc29sdmVcbiAgICovXG4gIHN0YXRpYyByZXNvbHZlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICYmIGlzRnVuY3Rpb24odmFsdWUudGhlbikpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgYWJvcnQoKSB7fVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIFByb21pc2UjY2F0Y2hcbiAgICogQHBhcmFtIHtvblJlamVjdGVkfSBvblJlamVjdGVkIC0gb25SZWplY3RlZCBjYWxsYmFjay5cbiAgICogQHJldHVybnMge1Byb21pc2V9IE5ldyBpbnN0YW5jZSBvZiBQcm9taXNlLlxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1Byb21pc2UvY2F0Y2hcbiAgICovXG4gIGNhdGNoKG9uUmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgUHJvbWlzZSNmaW5hbGx5XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtvbkZ1bGZpbGxlZE9yUmVqZWN0ZWR9IG9uRnVsZmlsbGVkT3JSZWplY3RlZCAtIG9uRnVsZmlsbGVkT3JSZWplY3RlZCBjYWxsYmFjay5cbiAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgZm9yIGNhdGNoaW5nIGJvdGggZnVsZmlsbGVkIGFuZCByZWplY3RlZCBwcm9taXNlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogc3Bpbm5lci5zaG93KCk7XG4gICAqIGZldGNoRGF0YSgpXG4gICAqICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICogICAgIC8vIGRvIHNvbWV0aGluZyB3aXRoIGRhdGFcbiAgICogICB9KVxuICAgKiAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAqICAgICAvLyBoYW5kbGUgZXJyb3Igc29tZWhvd1xuICAgKiAgIH0pXG4gICAqICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgKiAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAqICAgfSk7XG4gICAqL1xuICBmaW5hbGx5KG9uRnVsZmlsbGVkT3JSZWplY3RlZCkge1xuICAgIGNvbnN0IGlzRnVuYyA9IGlzRnVuY3Rpb24ob25GdWxmaWxsZWRPclJlamVjdGVkKTtcblxuICAgIHJldHVybiB0aGlzLnRoZW4oKHZhbHVlKSA9PiAoXG4gICAgICBQcm9taXNlXG4gICAgICAgIC5yZXNvbHZlKFxuICAgICAgICAgIGlzRnVuY1xuICAgICAgICAgICAgPyBvbkZ1bGZpbGxlZE9yUmVqZWN0ZWQoKVxuICAgICAgICAgICAgOiAwXG4gICAgICAgIClcbiAgICAgICAgLnRoZW4oKCkgPT4gdmFsdWUpXG4gICAgKSwgKGVycikgPT4gKFxuICAgICAgUHJvbWlzZVxuICAgICAgICAucmVzb2x2ZShcbiAgICAgICAgICBpc0Z1bmNcbiAgICAgICAgICAgID8gb25GdWxmaWxsZWRPclJlamVjdGVkKClcbiAgICAgICAgICAgIDogMFxuICAgICAgICApXG4gICAgICAgIC50aGVuKCgpID0+IFByb21pc2UucmVqZWN0KGVycikpXG4gICAgKSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBQcm9taXNlI3RoZW5cbiAgICogQHBhcmFtIHtvbkZ1bGZpbGxlZH0gW29uRnVsZmlsbGVkXSAtIG9uRnVsZmlsbGVkIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge29uUmVqZWN0ZWR9IFtvblJlamVjdGVkXSAtIG9uUmVqZWN0ZWQgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBOZXcgaW5zdGFuY2Ugb2YgUHJvbWlzZS5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9Qcm9taXNlL3RoZW5cbiAgICovXG4gIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICBjb25zdCBwcm9taXNlID0gdGhpcy4kJDtcblxuICAgIGlmIChwcm9taXNlLnN0YXR1cyA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBwcm9taXNlLmhhbmRsZSgncmVqZWN0Jywgb25SZWplY3RlZCwgcmVzb2x2ZSwgcmVqZWN0LCBzZWNyZXQpO1xuICAgICAgICBwcm9taXNlLmhhbmRsZSgncmVzb2x2ZScsIG9uRnVsZmlsbGVkLCByZXNvbHZlLCByZWplY3QsIHNlY3JldCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBwcm9taXNlLmhhbmRsZWQgPSBzZWNyZXQ7XG5cbiAgICBjb25zdCB7IHZhbHVlIH0gPSBwcm9taXNlO1xuXG4gICAgbGV0IG1ldGhvZDtcbiAgICBsZXQgaGFuZGxlcjtcblxuICAgIGlmIChwcm9taXNlLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpIHtcbiAgICAgIG1ldGhvZCA9ICdyZXNvbHZlJztcbiAgICAgIGhhbmRsZXIgPSBvbkZ1bGZpbGxlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgbWV0aG9kID0gJ3JlamVjdCc7XG4gICAgICBoYW5kbGVyID0gb25SZWplY3RlZDtcbiAgICB9XG5cbiAgICBpZiAoIWlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgIHJldHVybiBQcm9taXNlW21ldGhvZF0odmFsdWUpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGhhbmRsZXIodmFsdWUpKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgIH1cbiAgfVxufVxuXG5Qcm9taXNlLm9uRXJyb3IgPSBudWxsO1xuUHJvbWlzZS5vblVuaGFuZGxlZFJlamVjdGlvbiA9IGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlLCAnJXMgJW8nLCAnVW5jYXVnaHQgKGluIHByb21pc2UpJyk7XG5cbmV4cG9ydCBkZWZhdWx0IFByb21pc2U7XG4iLCJpbXBvcnQgUHJvbWlzZSBmcm9tICcuL2xpYi9Qcm9taXNlJztcblxud2luZG93LlByb21pc2UgPSBQcm9taXNlO1xuIl0sIm5hbWVzIjpbIndpbmRvdyIsImdsb2JhbCIsInNlbGYiLCJ2YWx1ZSIsInNlY3JldCIsIml0ZXJhdG9yIiwiU3ltYm9sIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwiUHJvbWlzZSIsImV4ZWN1dG9yIiwicmVqZWN0IiwiZXJyIiwiaGlkZGVuUHJvbWlzZSIsInN0YXR1cyIsImkiLCJsZW5ndGgiLCJvblJlamVjdCIsImhhbmRsZWQiLCJvblVuaGFuZGxlZFJlamVjdGlvbiIsIm9uRXJyb3IiLCJpc0Z1bmN0aW9uIiwicmVzb2x2ZSIsInRoZW4iLCJvbkZ1bGZpbGwiLCJUeXBlRXJyb3IiLCJjYWxsIiwiaGlkZGVuU3RhdHVzIiwiaGlkZGVuVmFsdWUiLCJyZWFsUHJvbWlzZSIsInRoaXMiLCJ2YWwiLCJ1bmRlZmluZWQiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiJCQiLCJrZXkiLCJmIiwicHJveHkiLCJwdXNoIiwib25SZWplY3RlZCIsIm9uRnVsZmlsbGVkT3JSZWplY3RlZCIsImlzRnVuYyIsIm9uRnVsZmlsbGVkIiwicHJvbWlzZSIsImhhbmRsZSIsIm1ldGhvZCIsImhhbmRsZXIiLCJpdGVyYWJsZSIsImFycmF5IiwidG9SZXNvbHZlIiwibmV4dCIsImRvbmUiLCJjb25zb2xlIiwiZXJyb3IiLCJiaW5kIl0sIm1hcHBpbmdzIjoid0JBRUEsT0FBaUMsbUJBQVhBLFFBQXlCQSxPQUEyQixtQkFBWEMsUUFBeUJBLE9BQXlCLG1CQUFUQyxNQUF1QkEsbUJDRi9HQyxTQUNHLGtCQUFWQSx3VkNrQkhDLEtBQ0FDLEVBQVdKLEVBQU9LLE9BQ3BCTCxFQUFPSyxPQUFPRCxTQUNkRSxLQUFLQyxTQUFTQyxTQUFTLFNBQ25CQSxJQUFBQSxTQWlCRkMsd0JBQ1FDLFdBb0ZEQyxHQUFPQyxHQUNlLFlBQXpCQyxFQUFjQyxzQkFDRkEsT0FBUyxhQUNUWixNQUFRVSxNQUVqQixHQUFJRyxHQUFJLEVBQUdDLEVBQVNDLEVBQVNELE9BQVFELEVB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"}