{"version":3,"file":"promise.js","sources":["../lib/isFunction.js","../lib/Promise.js","../browser.js"],"sourcesContent":["export default (value) => (\n  typeof value === 'function'\n);\n","import isFunction from './isFunction';\n\n/**\n * @callback onFulfilledOrRejected\n * @public\n */\n\n/**\n * @callback onRejected\n * @public\n * @param {Error|*} err - Promise error.\n */\n\n/**\n * @callback onFulfilled\n * @public\n * @param {*} value - Promise value.\n */\n\nconst secret = {};\nconst iterator = window.Symbol\n  ? window.Symbol.iterator\n  : Math.random().toString(36);\nconst { toString } = {};\n\n/**\n * @class Promise\n * @public\n * @param {Function} executor - Function that takes two arguments: resolve and reject functions.\n * Call the resolve function when you need to fulfill the promise and call the reject one\n * when you need to reject it.\n * @returns {Promise} Instance of Promise.\n * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise\n * @description Class with almost identical API to\n * [ES6 Promise]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise}.\n * There is a couple differences: set Promise.onError to a function with which you want to\n * subscribe to a promise error and set Promise.onUnhandledRejection to a function with which\n * you want to subscribe to an unhandled error\n * (defaults to console.error.bind(console, '%s %o', 'Uncaught (in promise)')).\n */\nclass Promise {\n  constructor(executor) {\n    if (!isFunction(executor)) {\n      throw new TypeError(`Promise resolver ${ toString.call(executor) } is not a function`);\n    }\n\n    let hiddenStatus;\n    let hiddenValue;\n\n    const\tonFulfill = [];\n    const onReject = [];\n    const realPromise = this;\n    const hiddenPromise = {\n      handled: false,\n      get status() {\n        return hiddenStatus;\n      },\n      set status(value) {\n        hiddenStatus = value;\n        realPromise.status = value;\n      },\n      get value() {\n        return hiddenValue;\n      },\n      set value(val) {\n        hiddenValue = val;\n        realPromise.value = val;\n      }\n    };\n\n    hiddenPromise.status = 'pending';\n    hiddenPromise.value = undefined;\n\n    Object.defineProperties(this.$$ = {}, {\n      handled: {\n        get() {\n          return hiddenPromise.handled;\n        },\n        set(key) {\n          if (key === secret) {\n            hiddenPromise.handled = true;\n          }\n        }\n      },\n      handle: {\n        value(status, f, resolve, reject, key) {\n          if (key === secret) {\n            let proxy = null;\n\n            if (isFunction(f)) {\n              proxy = (value) => {\n                try {\n                  resolve(f(value));\n                } catch (err) {\n                  reject(err);\n                }\n              };\n            }\n\n            if (status === 'resolve') {\n              onFulfill.push(proxy || ((value) => resolve(value)));\n            } else if (status === 'reject') {\n              onReject.push(proxy || ((err) => reject(err)));\n            }\n          }\n        }\n      },\n      status: {\n        get() {\n          return hiddenPromise.status;\n        }\n      },\n      value: {\n        get() {\n          return hiddenPromise.value;\n        }\n      }\n    });\n\n    try {\n      executor(resolve, reject);\n    } catch (err) {\n      reject(err);\n    }\n\n    function reject(err) {\n      if (hiddenPromise.status === 'pending') {\n        hiddenPromise.status = 'rejected';\n        hiddenPromise.value = err;\n\n        for (let i = 0, length = onReject.length; i < length; i++) {\n          hiddenPromise.handled = true;\n\n          onReject[i](err);\n        }\n\n        const {\n          onUnhandledRejection,\n          onError\n        } = Promise;\n\n        if (isFunction(onError)) {\n          onError(err);\n        }\n\n        setTimeout(() => {\n          if (!hiddenPromise.handled && isFunction(onUnhandledRejection)) {\n            onUnhandledRejection(err);\n          }\n        }, 1);\n      }\n    }\n\n    function resolve(value) {\n      if (hiddenPromise.status === 'pending') {\n        if (value && isFunction(value.then)) {\n          return value.then((value) => {\n            resolve(value);\n          }, (err) => {\n            reject(err);\n          });\n        }\n\n        hiddenPromise.status = 'fulfilled';\n        hiddenPromise.value = value;\n\n        for (let i = 0, length = onFulfill.length; i < length; i++) {\n          hiddenPromise.handled = true;\n\n          onFulfill[i](value);\n        }\n      }\n    }\n  }\n\n  /**\n   * @method Promise.all\n   * @param {(Array|Iterable).<Promise|*>} iterable - Iterable object (like array) of promises\n   * or any values.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all\n   */\n  static all(iterable) {\n    const array = [];\n\n    let toResolve = 0;\n\n    if (iterable[iterator]) {\n      iterable = iterable[iterator]();\n\n      return new Promise((resolve, reject) => {\n        let next;\n        let i = 0;\n\n        while (!(next = iterable.next()).done) {\n          const promise = Promise.resolve(next.value);\n\n          toResolve++;\n\n          ((i) => {\n            promise.then((value) => {\n              toResolve--;\n              array[i] = value;\n\n              setTimeout(() => {\n                if (next.done && !toResolve) {\n                  resolve(array);\n                }\n              }, 1);\n            }, reject);\n          })(i++);\n        }\n\n        if (!i) {\n          return Promise.resolve([]);\n        }\n      });\n    }\n\n    const length = iterable.length;\n\n    if (!length) {\n      return Promise.resolve([]);\n    }\n\n    toResolve = length;\n\n    return new Promise((resolve, reject) => {\n      for (let i = 0; i < length; i++) {\n        const promise = Promise.resolve(iterable[i]);\n\n        promise.then((value) => {\n          toResolve--;\n          array[i] = value;\n\n          if (!toResolve) {\n            resolve(array);\n          }\n        }, reject);\n      }\n    });\n  }\n\n  /**\n   * @method Promise.race\n   * @param {(Array|Iterable).<Promise|*>} iterable - Iterable object (like array) of promises\n   * or any values.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/race\n   */\n  static race(iterable) {\n    if (iterable[iterator]) {\n      iterable = iterable[iterator]();\n\n      return new Promise((resolve, reject) => {\n        let next;\n\n        while (!(next = iterable.next()).done) {\n          next.value.then(resolve, reject);\n        }\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      for (let i = 0, length = iterable.length; i < length; i++) {\n        iterable[i].then(resolve, reject);\n      }\n    });\n  }\n\n  /**\n   * @method Promise.reject\n   * @param {*} [value] - Value to reject.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/reject\n   */\n  static reject(value) {\n    return new Promise((resolve, reject) => {\n      reject(value);\n    });\n  }\n\n  /**\n   * @method Promise.resolve\n   * @param {Promise|Thenable|*} [value] - Promise, thenable or any value to resolve.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/resolve\n   */\n  static resolve(value) {\n    if (value && isFunction(value.then)) {\n      return value;\n    }\n\n    return new Promise((resolve) => {\n      resolve(value);\n    });\n  }\n\n  abort() {}\n\n  /**\n   * @method Promise#catch\n   * @param {onRejected} onRejected - onRejected callback.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch\n   */\n  catch(onRejected) {\n    return this.then(null, onRejected);\n  }\n\n  /**\n   * @method Promise#finally\n   * @public\n   * @param {onFulfilledOrRejected} onFulfilledOrRejected - onFulfilledOrRejected callback.\n   * @returns {Promise}\n   * @description Method for catching both fulfilled and rejected promises.\n   *\n   * @example\n   * spinner.show();\n   * fetchData()\n   *   .then((data) => {\n   *     // do something with data\n   *   })\n   *   .catch((err) => {\n   *     // handle error somehow\n   *   })\n   *   .finally(() => {\n   *     spinner.hide();\n   *   });\n   */\n  finally(onFulfilledOrRejected) {\n    const isFunc = isFunction(onFulfilledOrRejected);\n\n    return this.then((value) => (\n      Promise\n        .resolve(\n          isFunc\n            ? onFulfilledOrRejected()\n            : 0\n        )\n        .then(() => value)\n    ), (err) => (\n      Promise\n        .resolve(\n          isFunc\n            ? onFulfilledOrRejected()\n            : 0\n        )\n        .then(() => Promise.reject(err))\n    ));\n  }\n\n  /**\n   * @method Promise#then\n   * @param {onFulfilled} [onFulfilled] - onFulfilled callback.\n   * @param {onRejected} [onRejected] - onRejected callback.\n   * @returns {Promise} New instance of Promise.\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then\n   */\n  then(onFulfilled, onRejected) {\n    const promise = this.$$;\n\n    if (promise.status === 'pending') {\n      return new Promise((resolve, reject) => {\n        promise.handle('reject', onRejected, resolve, reject, secret);\n        promise.handle('resolve', onFulfilled, resolve, reject, secret);\n      });\n    }\n\n    promise.handled = secret;\n\n    const { value } = promise;\n\n    let method;\n    let handler;\n\n    if (promise.status === 'fulfilled') {\n      method = 'resolve';\n      handler = onFulfilled;\n    } else {\n      method = 'reject';\n      handler = onRejected;\n    }\n\n    if (!isFunction(handler)) {\n      return Promise[method](value);\n    }\n\n    try {\n      return Promise.resolve(handler(value));\n    } catch (err) {\n      return Promise.reject(err);\n    }\n  }\n}\n\nPromise.onError = null;\nPromise.onUnhandledRejection = console.error.bind(console, '%s %o', 'Uncaught (in promise)');\n\nexport default Promise;\n","import Promise from './lib/Promise';\n\nwindow.Promise = Promise;\n"],"names":["value","secret","iterator","window","Symbol","Math","random","toString","Promise","executor","isFunction","TypeError","call","hiddenStatus","hiddenValue","onFulfill","onReject","realPromise","hiddenPromise","status","val","undefined","defineProperties","$$","handled","key","f","resolve","reject","proxy","err","push","i","length","onUnhandledRejection","onError","then","onRejected","onFulfilledOrRejected","isFunc","onFulfilled","promise","handle","method","handler","iterable","array","toResolve","next","done","console","error","bind"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvbWlzZS5qcyIsInNvdXJjZXMiOlsiLi4vbGliL2lzRnVuY3Rpb24uanMiLCIuLi9saWIvUHJvbWlzZS5qcyIsIi4uL2Jyb3dzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgKHZhbHVlKSA9PiAoXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJ1xuKTtcbiIsImltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJy4vaXNGdW5jdGlvbic7XG5cbi8qKlxuICogQGNhbGxiYWNrIG9uRnVsZmlsbGVkT3JSZWplY3RlZFxuICogQHB1YmxpY1xuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIG9uUmVqZWN0ZWRcbiAqIEBwdWJsaWNcbiAqIEBwYXJhbSB7RXJyb3J8Kn0gZXJyIC0gUHJvbWlzZSBlcnJvci5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBvbkZ1bGZpbGxlZFxuICogQHB1YmxpY1xuICogQHBhcmFtIHsqfSB2YWx1ZSAtIFByb21pc2UgdmFsdWUuXG4gKi9cblxuY29uc3Qgc2VjcmV0ID0ge307XG5jb25zdCBpdGVyYXRvciA9IHdpbmRvdy5TeW1ib2xcbiAgPyB3aW5kb3cuU3ltYm9sLml0ZXJhdG9yXG4gIDogTWF0aC5yYW5kb20oKS50b1N0cmluZygzNik7XG5jb25zdCB7IHRvU3RyaW5nIH0gPSB7fTtcblxuLyoqXG4gKiBAY2xhc3MgUHJvbWlzZVxuICogQHB1YmxpY1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZXhlY3V0b3IgLSBGdW5jdGlvbiB0aGF0IHRha2VzIHR3byBhcmd1bWVudHM6IHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuXG4gKiBDYWxsIHRoZSByZXNvbHZlIGZ1bmN0aW9uIHdoZW4geW91IG5lZWQgdG8gZnVsZmlsbCB0aGUgcHJvbWlzZSBhbmQgY2FsbCB0aGUgcmVqZWN0IG9uZVxuICogd2hlbiB5b3UgbmVlZCB0byByZWplY3QgaXQuXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gSW5zdGFuY2Ugb2YgUHJvbWlzZS5cbiAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUHJvbWlzZVxuICogQGRlc2NyaXB0aW9uIENsYXNzIHdpdGggYWxtb3N0IGlkZW50aWNhbCBBUEkgdG9cbiAqIFtFUzYgUHJvbWlzZV17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUHJvbWlzZX0uXG4gKiBUaGVyZSBpcyBhIGNvdXBsZSBkaWZmZXJlbmNlczogc2V0IFByb21pc2Uub25FcnJvciB0byBhIGZ1bmN0aW9uIHdpdGggd2hpY2ggeW91IHdhbnQgdG9cbiAqIHN1YnNjcmliZSB0byBhIHByb21pc2UgZXJyb3IgYW5kIHNldCBQcm9taXNlLm9uVW5oYW5kbGVkUmVqZWN0aW9uIHRvIGEgZnVuY3Rpb24gd2l0aCB3aGljaFxuICogeW91IHdhbnQgdG8gc3Vic2NyaWJlIHRvIGFuIHVuaGFuZGxlZCBlcnJvclxuICogKGRlZmF1bHRzIHRvIGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlLCAnJXMgJW8nLCAnVW5jYXVnaHQgKGluIHByb21pc2UpJykpLlxuICovXG5jbGFzcyBQcm9taXNlIHtcbiAgY29uc3RydWN0b3IoZXhlY3V0b3IpIHtcbiAgICBpZiAoIWlzRnVuY3Rpb24oZXhlY3V0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBQcm9taXNlIHJlc29sdmVyICR7IHRvU3RyaW5nLmNhbGwoZXhlY3V0b3IpIH0gaXMgbm90IGEgZnVuY3Rpb25gKTtcbiAgICB9XG5cbiAgICBsZXQgaGlkZGVuU3RhdHVzO1xuICAgIGxldCBoaWRkZW5WYWx1ZTtcblxuICAgIGNvbnN0XHRvbkZ1bGZpbGwgPSBbXTtcbiAgICBjb25zdCBvblJlamVjdCA9IFtdO1xuICAgIGNvbnN0IHJlYWxQcm9taXNlID0gdGhpcztcbiAgICBjb25zdCBoaWRkZW5Qcm9taXNlID0ge1xuICAgICAgaGFuZGxlZDogZmFsc2UsXG4gICAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gaGlkZGVuU3RhdHVzO1xuICAgICAgfSxcbiAgICAgIHNldCBzdGF0dXModmFsdWUpIHtcbiAgICAgICAgaGlkZGVuU3RhdHVzID0gdmFsdWU7XG4gICAgICAgIHJlYWxQcm9taXNlLnN0YXR1cyA9IHZhbHVlO1xuICAgICAgfSxcbiAgICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIGhpZGRlblZhbHVlO1xuICAgICAgfSxcbiAgICAgIHNldCB2YWx1ZSh2YWwpIHtcbiAgICAgICAgaGlkZGVuVmFsdWUgPSB2YWw7XG4gICAgICAgIHJlYWxQcm9taXNlLnZhbHVlID0gdmFsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBoaWRkZW5Qcm9taXNlLnN0YXR1cyA9ICdwZW5kaW5nJztcbiAgICBoaWRkZW5Qcm9taXNlLnZhbHVlID0gdW5kZWZpbmVkO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcy4kJCA9IHt9LCB7XG4gICAgICBoYW5kbGVkOiB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gaGlkZGVuUHJvbWlzZS5oYW5kbGVkO1xuICAgICAgICB9LFxuICAgICAgICBzZXQoa2V5KSB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gc2VjcmV0KSB7XG4gICAgICAgICAgICBoaWRkZW5Qcm9taXNlLmhhbmRsZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGhhbmRsZToge1xuICAgICAgICB2YWx1ZShzdGF0dXMsIGYsIHJlc29sdmUsIHJlamVjdCwga2V5KSB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gc2VjcmV0KSB7XG4gICAgICAgICAgICBsZXQgcHJveHkgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihmKSkge1xuICAgICAgICAgICAgICBwcm94eSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlKGYodmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ3Jlc29sdmUnKSB7XG4gICAgICAgICAgICAgIG9uRnVsZmlsbC5wdXNoKHByb3h5IHx8ICgodmFsdWUpID0+IHJlc29sdmUodmFsdWUpKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ3JlamVjdCcpIHtcbiAgICAgICAgICAgICAgb25SZWplY3QucHVzaChwcm94eSB8fCAoKGVycikgPT4gcmVqZWN0KGVycikpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzdGF0dXM6IHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgIHJldHVybiBoaWRkZW5Qcm9taXNlLnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZhbHVlOiB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gaGlkZGVuUHJvbWlzZS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIGV4ZWN1dG9yKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZWplY3QoZXJyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWplY3QoZXJyKSB7XG4gICAgICBpZiAoaGlkZGVuUHJvbWlzZS5zdGF0dXMgPT09ICdwZW5kaW5nJykge1xuICAgICAgICBoaWRkZW5Qcm9taXNlLnN0YXR1cyA9ICdyZWplY3RlZCc7XG4gICAgICAgIGhpZGRlblByb21pc2UudmFsdWUgPSBlcnI7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IG9uUmVqZWN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaGlkZGVuUHJvbWlzZS5oYW5kbGVkID0gdHJ1ZTtcblxuICAgICAgICAgIG9uUmVqZWN0W2ldKGVycik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgb25VbmhhbmRsZWRSZWplY3Rpb24sXG4gICAgICAgICAgb25FcnJvclxuICAgICAgICB9ID0gUHJvbWlzZTtcblxuICAgICAgICBpZiAoaXNGdW5jdGlvbihvbkVycm9yKSkge1xuICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmICghaGlkZGVuUHJvbWlzZS5oYW5kbGVkICYmIGlzRnVuY3Rpb24ob25VbmhhbmRsZWRSZWplY3Rpb24pKSB7XG4gICAgICAgICAgICBvblVuaGFuZGxlZFJlamVjdGlvbihlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZSh2YWx1ZSkge1xuICAgICAgaWYgKGhpZGRlblByb21pc2Uuc3RhdHVzID09PSAncGVuZGluZycpIHtcbiAgICAgICAgaWYgKHZhbHVlICYmIGlzRnVuY3Rpb24odmFsdWUudGhlbikpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaGlkZGVuUHJvbWlzZS5zdGF0dXMgPSAnZnVsZmlsbGVkJztcbiAgICAgICAgaGlkZGVuUHJvbWlzZS52YWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBvbkZ1bGZpbGwubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBoaWRkZW5Qcm9taXNlLmhhbmRsZWQgPSB0cnVlO1xuXG4gICAgICAgICAgb25GdWxmaWxsW2ldKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIFByb21pc2UuYWxsXG4gICAqIEBwYXJhbSB7KEFycmF5fEl0ZXJhYmxlKS48UHJvbWlzZXwqPn0gaXRlcmFibGUgLSBJdGVyYWJsZSBvYmplY3QgKGxpa2UgYXJyYXkpIG9mIHByb21pc2VzXG4gICAqIG9yIGFueSB2YWx1ZXMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBOZXcgaW5zdGFuY2Ugb2YgUHJvbWlzZS5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9Qcm9taXNlL2FsbFxuICAgKi9cbiAgc3RhdGljIGFsbChpdGVyYWJsZSkge1xuICAgIGNvbnN0IGFycmF5ID0gW107XG5cbiAgICBsZXQgdG9SZXNvbHZlID0gMDtcblxuICAgIGlmIChpdGVyYWJsZVtpdGVyYXRvcl0pIHtcbiAgICAgIGl0ZXJhYmxlID0gaXRlcmFibGVbaXRlcmF0b3JdKCk7XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCBuZXh0O1xuICAgICAgICBsZXQgaSA9IDA7XG5cbiAgICAgICAgd2hpbGUgKCEobmV4dCA9IGl0ZXJhYmxlLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUobmV4dC52YWx1ZSk7XG5cbiAgICAgICAgICB0b1Jlc29sdmUrKztcblxuICAgICAgICAgICgoaSkgPT4ge1xuICAgICAgICAgICAgcHJvbWlzZS50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICB0b1Jlc29sdmUtLTtcbiAgICAgICAgICAgICAgYXJyYXlbaV0gPSB2YWx1ZTtcblxuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobmV4dC5kb25lICYmICF0b1Jlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoYXJyYXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgIH0pKGkrKyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWkpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgbGVuZ3RoID0gaXRlcmFibGUubGVuZ3RoO1xuXG4gICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICAgIH1cblxuICAgIHRvUmVzb2x2ZSA9IGxlbmd0aDtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoaXRlcmFibGVbaV0pO1xuXG4gICAgICAgIHByb21pc2UudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgICB0b1Jlc29sdmUtLTtcbiAgICAgICAgICBhcnJheVtpXSA9IHZhbHVlO1xuXG4gICAgICAgICAgaWYgKCF0b1Jlc29sdmUpIHtcbiAgICAgICAgICAgIHJlc29sdmUoYXJyYXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIFByb21pc2UucmFjZVxuICAgKiBAcGFyYW0geyhBcnJheXxJdGVyYWJsZSkuPFByb21pc2V8Kj59IGl0ZXJhYmxlIC0gSXRlcmFibGUgb2JqZWN0IChsaWtlIGFycmF5KSBvZiBwcm9taXNlc1xuICAgKiBvciBhbnkgdmFsdWVzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gTmV3IGluc3RhbmNlIG9mIFByb21pc2UuXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvUHJvbWlzZS9yYWNlXG4gICAqL1xuICBzdGF0aWMgcmFjZShpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZVtpdGVyYXRvcl0pIHtcbiAgICAgIGl0ZXJhYmxlID0gaXRlcmFibGVbaXRlcmF0b3JdKCk7XG5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCBuZXh0O1xuXG4gICAgICAgIHdoaWxlICghKG5leHQgPSBpdGVyYWJsZS5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBpdGVyYWJsZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYWJsZVtpXS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBQcm9taXNlLnJlamVjdFxuICAgKiBAcGFyYW0geyp9IFt2YWx1ZV0gLSBWYWx1ZSB0byByZWplY3QuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBOZXcgaW5zdGFuY2Ugb2YgUHJvbWlzZS5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9Qcm9taXNlL3JlamVjdFxuICAgKi9cbiAgc3RhdGljIHJlamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZWplY3QodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgUHJvbWlzZS5yZXNvbHZlXG4gICAqIEBwYXJhbSB7UHJvbWlzZXxUaGVuYWJsZXwqfSBbdmFsdWVdIC0gUHJvbWlzZSwgdGhlbmFibGUgb3IgYW55IHZhbHVlIHRvIHJlc29sdmUuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBOZXcgaW5zdGFuY2Ugb2YgUHJvbWlzZS5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9Qcm9taXNlL3Jlc29sdmVcbiAgICovXG4gIHN0YXRpYyByZXNvbHZlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICYmIGlzRnVuY3Rpb24odmFsdWUudGhlbikpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgYWJvcnQoKSB7fVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIFByb21pc2UjY2F0Y2hcbiAgICogQHBhcmFtIHtvblJlamVjdGVkfSBvblJlamVjdGVkIC0gb25SZWplY3RlZCBjYWxsYmFjay5cbiAgICogQHJldHVybnMge1Byb21pc2V9IE5ldyBpbnN0YW5jZSBvZiBQcm9taXNlLlxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1Byb21pc2UvY2F0Y2hcbiAgICovXG4gIGNhdGNoKG9uUmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgUHJvbWlzZSNmaW5hbGx5XG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtvbkZ1bGZpbGxlZE9yUmVqZWN0ZWR9IG9uRnVsZmlsbGVkT3JSZWplY3RlZCAtIG9uRnVsZmlsbGVkT3JSZWplY3RlZCBjYWxsYmFjay5cbiAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgZm9yIGNhdGNoaW5nIGJvdGggZnVsZmlsbGVkIGFuZCByZWplY3RlZCBwcm9taXNlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogc3Bpbm5lci5zaG93KCk7XG4gICAqIGZldGNoRGF0YSgpXG4gICAqICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICogICAgIC8vIGRvIHNvbWV0aGluZyB3aXRoIGRhdGFcbiAgICogICB9KVxuICAgKiAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAqICAgICAvLyBoYW5kbGUgZXJyb3Igc29tZWhvd1xuICAgKiAgIH0pXG4gICAqICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgKiAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAqICAgfSk7XG4gICAqL1xuICBmaW5hbGx5KG9uRnVsZmlsbGVkT3JSZWplY3RlZCkge1xuICAgIGNvbnN0IGlzRnVuYyA9IGlzRnVuY3Rpb24ob25GdWxmaWxsZWRPclJlamVjdGVkKTtcblxuICAgIHJldHVybiB0aGlzLnRoZW4oKHZhbHVlKSA9PiAoXG4gICAgICBQcm9taXNlXG4gICAgICAgIC5yZXNvbHZlKFxuICAgICAgICAgIGlzRnVuY1xuICAgICAgICAgICAgPyBvbkZ1bGZpbGxlZE9yUmVqZWN0ZWQoKVxuICAgICAgICAgICAgOiAwXG4gICAgICAgIClcbiAgICAgICAgLnRoZW4oKCkgPT4gdmFsdWUpXG4gICAgKSwgKGVycikgPT4gKFxuICAgICAgUHJvbWlzZVxuICAgICAgICAucmVzb2x2ZShcbiAgICAgICAgICBpc0Z1bmNcbiAgICAgICAgICAgID8gb25GdWxmaWxsZWRPclJlamVjdGVkKClcbiAgICAgICAgICAgIDogMFxuICAgICAgICApXG4gICAgICAgIC50aGVuKCgpID0+IFByb21pc2UucmVqZWN0KGVycikpXG4gICAgKSk7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCBQcm9taXNlI3RoZW5cbiAgICogQHBhcmFtIHtvbkZ1bGZpbGxlZH0gW29uRnVsZmlsbGVkXSAtIG9uRnVsZmlsbGVkIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge29uUmVqZWN0ZWR9IFtvblJlamVjdGVkXSAtIG9uUmVqZWN0ZWQgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBOZXcgaW5zdGFuY2Ugb2YgUHJvbWlzZS5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9Qcm9taXNlL3RoZW5cbiAgICovXG4gIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICBjb25zdCBwcm9taXNlID0gdGhpcy4kJDtcblxuICAgIGlmIChwcm9taXNlLnN0YXR1cyA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBwcm9taXNlLmhhbmRsZSgncmVqZWN0Jywgb25SZWplY3RlZCwgcmVzb2x2ZSwgcmVqZWN0LCBzZWNyZXQpO1xuICAgICAgICBwcm9taXNlLmhhbmRsZSgncmVzb2x2ZScsIG9uRnVsZmlsbGVkLCByZXNvbHZlLCByZWplY3QsIHNlY3JldCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBwcm9taXNlLmhhbmRsZWQgPSBzZWNyZXQ7XG5cbiAgICBjb25zdCB7IHZhbHVlIH0gPSBwcm9taXNlO1xuXG4gICAgbGV0IG1ldGhvZDtcbiAgICBsZXQgaGFuZGxlcjtcblxuICAgIGlmIChwcm9taXNlLnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpIHtcbiAgICAgIG1ldGhvZCA9ICdyZXNvbHZlJztcbiAgICAgIGhhbmRsZXIgPSBvbkZ1bGZpbGxlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgbWV0aG9kID0gJ3JlamVjdCc7XG4gICAgICBoYW5kbGVyID0gb25SZWplY3RlZDtcbiAgICB9XG5cbiAgICBpZiAoIWlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgIHJldHVybiBQcm9taXNlW21ldGhvZF0odmFsdWUpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGhhbmRsZXIodmFsdWUpKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgIH1cbiAgfVxufVxuXG5Qcm9taXNlLm9uRXJyb3IgPSBudWxsO1xuUHJvbWlzZS5vblVuaGFuZGxlZFJlamVjdGlvbiA9IGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlLCAnJXMgJW8nLCAnVW5jYXVnaHQgKGluIHByb21pc2UpJyk7XG5cbmV4cG9ydCBkZWZhdWx0IFByb21pc2U7XG4iLCJpbXBvcnQgUHJvbWlzZSBmcm9tICcuL2xpYi9Qcm9taXNlJztcblxud2luZG93LlByb21pc2UgPSBQcm9taXNlO1xuIl0sIm5hbWVzIjpbInZhbHVlIiwic2VjcmV0IiwiaXRlcmF0b3IiLCJ3aW5kb3ciLCJTeW1ib2wiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJQcm9taXNlIiwiZXhlY3V0b3IiLCJpc0Z1bmN0aW9uIiwiVHlwZUVycm9yIiwiY2FsbCIsImhpZGRlblN0YXR1cyIsImhpZGRlblZhbHVlIiwib25GdWxmaWxsIiwib25SZWplY3QiLCJyZWFsUHJvbWlzZSIsImhpZGRlblByb21pc2UiLCJzdGF0dXMiLCJ2YWwiLCJ1bmRlZmluZWQiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiJCQiLCJoYW5kbGVkIiwia2V5IiwiZiIsInJlc29sdmUiLCJyZWplY3QiLCJwcm94eSIsImVyciIsInB1c2giLCJpIiwibGVuZ3RoIiwib25VbmhhbmRsZWRSZWplY3Rpb24iLCJvbkVycm9yIiwidGhlbiIsIm9uUmVqZWN0ZWQiLCJvbkZ1bGZpbGxlZE9yUmVqZWN0ZWQiLCJpc0Z1bmMiLCJvbkZ1bGZpbGxlZCIsInByb21pc2UiLCJoYW5kbGUiLCJtZXRob2QiLCJoYW5kbGVyIiwiaXRlcmFibGUiLCJhcnJheSIsInRvUmVzb2x2ZSIsIm5leHQiLCJkb25lIiwiY29uc29sZSIsImVycm9yIiwiYmluZCJdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsa0JBQWUsVUFBQ0EsS0FBRDtTQUNiLE9BQU9BLEtBQVAsS0FBaUIsVUFESjtDQUFmOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0VBOzs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQSxJQUFNQyxTQUFTLEVBQWY7QUFDQSxJQUFNQyxXQUFXQyxPQUFPQyxNQUFQLEdBQ2JELE9BQU9DLE1BQVAsQ0FBY0YsUUFERCxHQUViRyxLQUFLQyxNQUFMLEdBQWNDLFFBQWQsQ0FBdUIsRUFBdkIsQ0FGSjtXQUdxQjtJQUFiQSxnQkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWlCRkM7bUJBQ1FDLFFBQVosRUFBc0I7OztRQUNoQixDQUFDQyxXQUFXRCxRQUFYLENBQUwsRUFBMkI7WUFDbkIsSUFBSUUsU0FBSix1QkFBbUNKLFNBQVNLLElBQVQsQ0FBY0gsUUFBZCxDQUFuQyx3QkFBTjs7O1FBR0VJLHFCQUFKO1FBQ0lDLG9CQUFKOztRQUVNQyxZQUFZLEVBQWxCO1FBQ01DLFdBQVcsRUFBakI7UUFDTUMsY0FBYyxJQUFwQjtRQUNNQyxnQkFBZ0I7ZUFDWCxLQURXO1VBRWhCQyxNQUFKLEdBQWE7ZUFDSk4sWUFBUDtPQUhrQjtVQUtoQk0sTUFBSixDQUFXbkIs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"}